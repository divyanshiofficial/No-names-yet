{% extends 'store/base.html' %}
{% block content %}
<section style="padding: 40px; background-color: #efdfbb; min-height: 80vh;">
    <h2 style="text-align: center; color: #5c4033;">Your Cart</h2>

    {% if cart_items %}
        <table style="width: 100%; margin-top: 30px; border-collapse: collapse;">
            <tr style="border-bottom: 1px solid #ccc;">
                <th style="padding: 10px; text-align: left;">Product</th>
                <th style="padding: 10px; text-align: center;">Quantity</th>
                <th style="padding: 10px; text-align: center;">Price</th>
                <th style="padding: 10px; text-align: center;">Total</th>
                <th style="padding: 10px; text-align: center;">Action</th> <!-- New Column -->
            </tr>
            {% for item in cart_items %}
            <tr style="border-bottom: 1px solid #ccc;">
                <td style="padding: 10px;">{{ item.product.name }}</td>
                <td style="padding: 10px; text-align: center;">{{ item.quantity }}</td>
                <td style="padding: 10px; text-align: center;">₹{{ item.product.price }}</td>
                <td style="padding: 10px; text-align: center;">₹{{ item.get_total }}</td>
                <td style="padding: 10px; text-align: center;">
                    {% comment %} <a href="{% url 'remove_from_cart' item.id %}" 
                       onclick="return confirm('Remove this item from your cart?')"
                       style="color: red; text-decoration: none; font-weight: bold;">
                        ❌ Remove
                    </a> {% endcomment %}
                    <form method="POST" action="{% url 'remove_from_cart' item.id %}">
            {% csrf_token %}
            <button type="submit" style="
                background-color: #5c4033;
                color: #f6ead3;
                padding: 6px 12px;
                border: none;
                border-radius: 4px;
                cursor: pointer;
            ">Remove</button>
        </form>
                </td>
            </tr>
            {% endfor %}
        </table>

        <div style="text-align: right; font-weight: bold; margin-top: 20px; font-size: 1.2em;">
            Total Amount: ₹{{ total }}
        </div>
        <div style="text-align: right; margin-top: 30px;">
            <a href="{% url 'checkout' %}"
            style="background-color: #5c4033; color: #f6ead3; padding: 10px 20px; text-decoration: none; border-radius: 8px; font-weight: bold;">
                Proceed to Payment
            </a>
        </div>

    {% else %}
        <p style="text-align: center; margin-top: 50px;">Your cart is empty.</p>
    {% endif %}
</section>
{% endblock %}
